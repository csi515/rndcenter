{% extends "base.html" %}
{% block title %}연구 일정 - R&D 센터 관리시스템{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
.schedule-calendar-table { width: 100%; border-collapse: collapse; table-layout: fixed; }
.schedule-calendar-table th, .schedule-calendar-table td { border: 1px solid #dee2e6; text-align: center; vertical-align: middle; padding: 8px; }
.schedule-calendar-table th.project-header { background: #e9ecef; font-weight: bold; width: 150px; }
.schedule-calendar-table th.month-header { background: #f8f9fa; font-size: 1.1em; font-weight: bold; color: #495057; }
.schedule-calendar-table th.week-header { background: #f1f3f4; font-size: 0.9em; font-weight: 600; color: #6c757d; }
.schedule-calendar-table td.project-name { background: #f8f9fa; font-weight: bold; text-align: left; }
.schedule-calendar-table td.editable { cursor: pointer; background: #fffbe7; min-height: 60px; }
.schedule-calendar-table td.editable:hover { background: #fff3cd; }
.schedule-calendar-table td.merged { background: #e3f2fd; }
.schedule-calendar-table .summary-text { font-size: 0.9em; font-weight: 500; display: block; }
.schedule-calendar-table .expand-btn { cursor: pointer; color: #007bff; margin-left: 4px; font-size: 0.8em; }
.schedule-calendar-table .detail-content { display: none; font-size: 0.85em; color: #666; background: #f8f9fa; border-radius: 4px; margin-top: 4px; padding: 6px; text-align: left; }
.schedule-calendar-table .detail-content.open { display: block; }
.add-row-btn { margin: 10px 0; }
.filter-bar { margin-bottom: 16px; }
</style>
{% endblock %}
{% block content %}
<div class="row mb-3">
  <div class="col-12 d-flex justify-content-between align-items-center">
    <h2><i class="fas fa-calendar-alt"></i> 연구 일정</h2>
    <button class="btn btn-primary add-row-btn" id="addRowBtn"><i class="fas fa-plus"></i> 프로젝트 추가</button>
    </div>
</div>
<div class="row filter-bar align-items-center">
  <div class="col-md-12 d-flex justify-content-end align-items-center">
    <button class="btn btn-outline-secondary btn-sm me-2" id="prevMonthBtn">이전 달</button>
    <span id="currentMonthLabel" style="min-width:120px;display:inline-block;"></span>
    <button class="btn btn-outline-secondary btn-sm ms-2" id="nextMonthBtn">다음 달</button>
    </div>
</div>
<div class="table-responsive">
  <table class="schedule-calendar-table" id="scheduleTable">
    <thead id="calendarHeader">
      <!-- JS로 동적 생성 -->
    </thead>
    <tbody id="calendarBody">
      <!-- JS로 동적 생성 -->
    </tbody>
  </table>
</div>
<div id="feedbackMsg" class="mt-3"></div>
{% endblock %}
{% block extra_js %}
<script>
window.projects = {{ projects|tojson|safe }};
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.10/dayjs.min.js"></script>
<script src="/static/js/project-schedule.js"></script>
{% endblock %}